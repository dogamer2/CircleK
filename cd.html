<h1>Access Code Admin</h1>
<div id="codes"></div>

<button id="new">Generate New Code</button>

<script type="module">
<h1>Access Code Admin</h1>
<div id="codes"></div>
<button id="new">Generate New Code</button>

<script type="module">
import { supabase, generateCode } from "./supabase.js";

<h1>Access Code Admin</h1>
<div id="codes"></div>
<button id="new">Generate New Code</button>

<script type="module">
import { supabase, generateCode } from "./supabase.js";

async function loadCodes() {
  const { data, error } = await supabase.from("access_codes").select("*").order("created_at", { ascending: false });
  if (error) {
    document.getElementById("codes").innerHTML = "Error loading codes";
    console.error(error);
    return;
  }
  document.getElementById("codes").innerHTML =
    data.map(c => `<div>${c.code} â€” ${c.used ? "USED" : "UNUSED"}</div>`).join("");
}

loadCodes();

};
</script>
